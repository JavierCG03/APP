<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:versionCode="1">
    
    <!-- ========================================== -->
    <!-- CONFIGURACIÓN DE LA APLICACIÓN -->
    <!-- ========================================== -->
    <application 
        android:allowBackup="true" 
        android:icon="@mipmap/logocars" 
        android:supportsRtl="true" 
        android:label="Carsline" 
        android:networkSecurityConfig="@xml/network_security_config" 
        android:usesCleartextTraffic="true"/>
    
    <!-- ========================================== -->
    <!-- PERMISOS EXISTENTES -->
    <!-- ========================================== -->
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.READ_MEDIA_IMAGES"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.CALL_PHONE"/>
    <uses-permission android:name="android.permission.SEND_SMS"/>
    
    <!-- ========================================== -->
    <!-- NUEVOS PERMISOS AGREGADOS -->
    <!-- ========================================== -->
    <!-- Permiso para abrir el marcador telefónico (menos restrictivo que CALL_PHONE) -->
    <uses-permission android:name="android.permission.DIAL_PHONE"/>
    
    <!-- ========================================== -->
    <!-- CONSULTAS DE PAQUETES (Android 11+) -->
    <!-- ========================================== -->
    <queries>
        <!-- Intents existentes para cámara y galería -->
        <intent>
            <action android:name="android.media.action.IMAGE_CAPTURE"/>
        </intent>
        <intent>
            <action android:name="android.intent.action.PICK"/>
        </intent>
        
        <!-- ============================================ -->
        <!-- NUEVOS INTENTS Y PAQUETES PARA ACCESOS DIRECTOS -->
        <!-- ============================================ -->
        
        <!-- Aplicaciones específicas -->
        <package android:name="com.whatsapp"/>
        <package android:name="com.whatsapp.w4b"/>
        <package android:name="com.google.android.gm"/>
        <package android:name="com.google.android.apps.maps"/>
        <package android:name="com.microsoft.office.outlook"/>
        
        <!-- Intent para llamadas telefónicas -->
        <intent>
            <action android:name="android.intent.action.DIAL"/>
        </intent>
        <intent>
            <action android:name="android.intent.action.CALL"/>
        </intent>
        
        <!-- Intent para SMS -->
        <intent>
            <action android:name="android.intent.action.SENDTO"/>
            <data android:scheme="smsto"/>
        </intent>
        <intent>
            <action android:name="android.intent.action.VIEW"/>
            <data android:scheme="sms"/>
        </intent>
        
        <!-- Intent para Email -->
        <intent>
            <action android:name="android.intent.action.SENDTO"/>
            <data android:scheme="mailto"/>
        </intent>
        <intent>
            <action android:name="android.intent.action.SEND"/>
            <data android:mimeType="message/rfc822"/>
        </intent>
        
        <!-- Intent para navegador web (HTTP/HTTPS) -->
        <intent>
            <action android:name="android.intent.action.VIEW"/>
            <data android:scheme="http"/>
        </intent>
        <intent>
            <action android:name="android.intent.action.VIEW"/>
            <data android:scheme="https"/>
        </intent>
        
        <!-- Intent para mapas -->
        <intent>
            <action android:name="android.intent.action.VIEW"/>
            <data android:scheme="geo"/>
        </intent>
        
        <!-- Intent para compartir -->
        <intent>
            <action android:name="android.intent.action.SEND"/>
            <data android:mimeType="*/*"/>
        </intent>
    </queries>
    
</manifest>
